<!-- project listing macros -->
{% macro project_listing(page) %}
<article class="post-list project-listing">
    {% set album_cover = "/covers/" ~ page.slug ~ ".jpg" %}
    {% set album_cover_alt = page.title ~ " album cover" %}

    <a href="{{ page.permalink }}" class="project-cover">
        <img src="{{ album_cover }}" alt="{{ album_cover_alt }}"/>
    </a>
    <div class="project-details">
        <a href="{{ page.permalink }}">
            <header>
                <h3>{{ page.title }}</h3>
            </header>
            {% if page.summary %}
            <div class="content post-summary">
                {{ page.summary | markdown | safe }}
            </div>
            {% endif %}
        </a>
        {{ self::project_info(page=page) }}
    </div>
</article>
{% endmacro project_listing %}

{% macro project_info(page) %}
<div class="article-info">
    {% if page.date %}
    <div class="article-date">{{ page.date | date(format="%b %d %Y") }}</div>
    {% endif %}
    <div class="article-taxonomies">
        {% if page.taxonomies.categories %}
        â—¦
        <ul class="article-categories">
            {% for cat in page.taxonomies.categories %}
            <li><a href="{{ get_taxonomy_url(kind="categories", name=cat) | safe }}">{{ cat }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
        {% if page.taxonomies.tags %}
        <ul class="article-tags">
            {% for tag in page.taxonomies.tags %}
            <li><a href="{{ get_taxonomy_url(kind="tags", name=tag) | safe }}">#{{ tag }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endmacro project_info %}
